# 程序语言2024  作业3

> 211502008 李诚希
>
> chengxili@smail.nju.edu.cn



我对作业内容要求的理解为：

实现：

假设有一个洗车场，提供两种类型的服务:标准洗车和高档洗车(多收3美元，提供抛光服务)

对于每个客户，存在一个属性表示是否为会员，是的话连续五次洗车就赠送一次高级洗车。



我进行如下修改：添加一个客户类`class customer`，存储是否是会员以及洗车次数。然后给`service`接口添加参数`customer`，根据premium参数和customer参数联合判断使用哪种算法。

代码如下：

``` cpp
class customer {
  public:
  	int wash_time;
  	bool is_member;
}
class car {
  //...
}
class wash {
  public:
  	void wash(car C)
}
class standerWash : public wash {
  public:
  	void wash(car C)
}
class premiumWash : public wash {
  public:
  	void wash(car C)
}
class carWash {
  void service(car C, customer P, bool premium) {
    std::shared_ptr<wash> S;
    if(premium) {
      S = std::make_shared<premiumWash>();
    }	else if(P.is_member && P.wash_time >= 5) {
      S = std::make_shared<premiumWash>();
      P.wash_time = 0;
    }
    else {
      S = std::make_shared<standerWash>();
      if(P.is_member){
        P.wash_time ++;
      }
    }
    S->wash(C);
  }
}

```

